# Implementation Plan

- [-] 1. Search Functionality
  - [x] 1.1 Implement SearchInput component with focus handling
    - Create `SearchInput` struct with query state and focus tracking
    - Implement text input handling with real-time updates
    - Wire to existing SearchEngine model
    - _Requirements: 1.1, 1.2_
  - [x] 1.2 Implement search filtering in FileList
    - Filter entries based on search query
    - Integrate with nucleo fuzzy matching
    - Update FileList to show filtered results
    - _Requirements: 1.2, 1.4_
  - [x] 1.3 Write property test for search filter correctness
    - **Property 1: Search Filter Correctness**
    - **Validates: Requirements 1.2, 1.4**
  - [x] 1.4 Implement search result highlighting
    - Extract match positions from nucleo
    - Apply highlight styling to matched characters
    - _Requirements: 1.3_
  - [x] 1.5 Write property test for highlight positions validity
    - **Property 2: Search Highlight Positions Validity**
    - **Validates: Requirements 1.3**
  - [x] 1.6 Implement search clear and escape handling
    - Clear search on empty input or Escape key
    - Restore full file list when cleared
    - _Requirements: 1.5, 1.6_
  - [-] 1.7 Write property test for empty search returns all
    - **Property 3: Empty Search Returns All**
    - **Validates: Requirements 1.5**

- [ ] 2. Breadcrumb Navigation
  - [ ] 2.1 Implement Breadcrumb component with clickable segments
    - Create `Breadcrumb` struct with path parsing
    - Render each segment as clickable element
    - Handle click to navigate to segment path
    - _Requirements: 2.1, 2.2_
  - [ ] 2.2 Write property test for breadcrumb segment count
    - **Property 4: Breadcrumb Segment Count**
    - **Validates: Requirements 2.1**
  - [ ] 2.3 Write property test for breadcrumb path reconstruction
    - **Property 5: Breadcrumb Path Reconstruction**
    - **Validates: Requirements 2.2, 2.6**
  - [ ] 2.4 Implement breadcrumb truncation with ellipsis
    - Truncate middle segments when path is long
    - Show ellipsis dropdown for hidden segments
    - _Requirements: 2.4, 2.5_
  - [ ] 2.5 Write property test for breadcrumb truncation
    - **Property 6: Breadcrumb Truncation**
    - **Validates: Requirements 2.4**
  - [ ] 2.6 Implement breadcrumb context menu
    - Right-click to show "Copy Path" option
    - Copy path to clipboard on selection
    - _Requirements: 2.7_

- [x] 3. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [-] 4. Column Sorting
  - [x] 4.1 Implement SortState with column and direction
    - Create `SortState` struct with column enum and direction
    - Implement toggle logic for same-column clicks
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_
  - [x] 4.2 Implement sort functions for each column
    - Sort by name (alphabetical, case-insensitive)
    - Sort by date (newest/oldest first)
    - Sort by type (extension alphabetical)
    - Sort by size (largest/smallest first)
    - _Requirements: 3.1, 3.2, 3.3, 3.4_
  - [-] 4.3 Write property tests for sort ordering
    - **Property 7: Sort by Name Ordering**
    - **Property 8: Sort by Date Ordering**
    - **Property 9: Sort by Type Ordering**
    - **Property 10: Sort by Size Ordering**
    - **Validates: Requirements 3.1, 3.2, 3.3, 3.4**
  - [ ] 4.4 Write property test for sort toggle reversal
    - **Property 11: Sort Toggle Reversal**
    - **Validates: Requirements 3.5**
  - [ ] 4.5 Implement directories-first grouping
    - Partition entries into directories and files
    - Apply sort within each group
    - _Requirements: 3.7_
  - [ ] 4.6 Write property test for directories first invariant
    - **Property 12: Directories First Invariant**
    - **Validates: Requirements 3.7**
  - [ ] 4.7 Wire sort state to FileList column headers
    - Add click handlers to column headers
    - Display sort direction indicator
    - Maintain sort on directory changes
    - _Requirements: 3.6, 3.8_
  - [ ] 4.8 Write property test for sort stability on update
    - **Property 13: Sort Stability on Update**
    - **Validates: Requirements 3.8**

- [ ] 5. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 6. Sidebar Favorites with Drag-and-Drop
  - [ ] 6.1 Implement Favorites model with persistence
    - Create `Favorites` struct with add/remove/reorder
    - Implement save/load to JSON config file
    - _Requirements: 4.2, 4.3_
  - [ ] 6.2 Write property test for favorites persistence
    - **Property 14: Favorites Add Persistence**
    - **Validates: Requirements 4.2, 4.3**
  - [ ] 6.3 Implement drag-and-drop for adding favorites
    - Detect folder drag from FileList
    - Show drop zone indicator in Sidebar
    - Add dropped folder to favorites
    - _Requirements: 4.1, 4.2_
  - [ ] 6.4 Implement favorites reordering
    - Allow drag within favorites section
    - Update order on drop
    - _Requirements: 4.6_
  - [ ] 6.5 Write property test for favorites reorder
    - **Property 15: Favorites Reorder Preservation**
    - **Validates: Requirements 4.6**
  - [ ] 6.6 Implement favorites validation and context menu
    - Validate paths exist on load
    - Show warning for invalid paths
    - Context menu with Remove option
    - _Requirements: 4.5, 4.7, 4.8_
  - [ ] 6.7 Write property test for invalid path detection
    - **Property 16: Favorites Invalid Path Detection**
    - **Validates: Requirements 4.7**

- [ ] 7. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 8. Grid View Mode
  - [ ] 8.1 Implement ViewMode enum and GridConfig
    - Create `ViewMode` enum with List/Grid variants
    - Create `GridConfig` with icon size and spacing
    - Add view mode to GlobalSettings
    - _Requirements: 5.1, 5.4_
  - [ ] 8.2 Implement grid layout calculation
    - Calculate columns based on viewport width
    - Implement responsive grid arrangement
    - _Requirements: 5.3_
  - [ ] 8.3 Write property test for grid columns calculation
    - **Property 17: Grid Columns Calculation**
    - **Validates: Requirements 5.3**
  - [ ] 8.4 Implement GridView rendering
    - Render file icons at 64x64
    - Display file name below icon
    - Support selection and context menu
    - _Requirements: 5.2, 5.5_
  - [ ] 8.5 Implement view mode switching
    - Toggle between List and Grid views
    - Preserve selection on switch
    - _Requirements: 5.1, 5.4, 5.7_
  - [ ] 8.6 Write property test for selection preservation
    - **Property 18: View Mode Selection Preservation**
    - **Validates: Requirements 5.7**
  - [ ] 8.7 Implement view mode persistence
    - Save view mode to settings
    - Restore on application start
    - _Requirements: 5.8_
  - [ ] 8.8 Write property test for view mode persistence
    - **Property 19: View Mode Persistence**
    - **Validates: Requirements 5.8**

- [ ] 9. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 10. Theme System with RPG Aesthetics
  - [ ] 10.1 Implement Theme, ThemeColors, and ThemeDecorations structs
    - Define ThemeColors with all color fields (backgrounds, text, accents, semantic, borders, file colors, terminal)
    - Define ThemeDecorations with border styles, corner flourishes, divider styles, shadows, background effects
    - Define ThemeTypography with font families, weights, sizes per theme
    - _Requirements: 14.4_
  - [ ] 10.2 Implement Dragon Forge theme (default)
    - Deep crimson (#d43f3f) and molten gold (#f4b842) palette
    - Warm parchment text (#f4e8dc) on volcanic backgrounds
    - Ember glow effects, gold-trimmed ornate borders
    - Volcanic background pattern with noise texture
    - _Requirements: 14.5_
  - [ ] 10.3 Implement Frost Haven theme
    - Ice blues (#6bd4ff) and aurora purples (#b48aff)
    - Crystalline borders with northern lights glow
    - Frosted glass backgrounds with ice crystal patterns
    - _Requirements: 14.6_
  - [ ] 10.4 Implement Ancient Tome theme
    - Parchment textures, leather browns (#8b4513), gold leaf (#d4af37)
    - Medieval serif typography emphasis (Newsreader font)
    - Weathered paper backgrounds, embossed borders
    - _Requirements: 14.7_
  - [ ] 10.5 Implement Shadow Realm theme
    - Deep purples (#4a0080), ethereal glows (#9966ff), void blacks
    - Mystical particle effects, swirling void patterns
    - Ethereal glow shadows
    - _Requirements: 14.8_
  - [ ] 10.6 Implement Elven Glade theme
    - Forest greens (#228b22), moonlight silver, bark browns
    - Organic flowing borders, vine patterns
    - Soft moonlight glow effects
    - _Requirements: 14.9_
  - [ ] 10.7 Write property test for theme color completeness
    - **Property 36: Theme Color Completeness**
    - **Validates: Requirements 14.4**
  - [ ] 10.8 Implement ThemeManager with persistence
    - Load/save current theme selection
    - Provide theme switching API with transition animations
    - _Requirements: 14.1, 14.10_
  - [ ] 10.9 Write property test for theme persistence
    - **Property 35: Theme Persistence**
    - **Validates: Requirements 14.1, 14.10**
  - [ ] 10.10 Integrate theme colors and decorations into all UI components
    - Update Workspace, FileList, Sidebar, Terminal, Preview, StatusBar
    - Apply themed shadows, glows, borders, backgrounds
    - Use theme-specific font weights and letter spacing
    - _Requirements: 14.3, 14.4_
  - [ ] 10.11 Write property test for theme application consistency
    - **Property 37: Theme Application Consistency**
    - **Validates: Requirements 14.3, 14.4**
  - [ ] 10.12 Implement theme picker UI with animated previews
    - Show available themes with live preview cards
    - Animated theme transition on selection (250ms crossfade)
    - Display theme name, description, and color swatches
    - _Requirements: 14.2, 14.3_

- [ ] 11. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.


- [ ] 12. Integrated Terminal
  - [ ] 12.1 Implement TerminalState model
    - Create `TerminalState` with lines, cursor, scroll
    - Create `TerminalLine` and `TerminalCell` structs
    - _Requirements: 6.3_
  - [ ] 12.2 Implement ANSI parser
    - Parse ANSI escape sequences for colors/styles
    - Handle cursor movement and clear commands
    - _Requirements: 6.4_
  - [ ] 12.3 Write property test for ANSI color parsing
    - **Property 20: ANSI Color Parsing**
    - **Validates: Requirements 6.4**
  - [ ] 12.4 Implement PTY service
    - Spawn shell process (zsh/bash/cmd)
    - Handle stdin/stdout communication
    - Set working directory
    - _Requirements: 6.2, 6.5_
  - [ ] 12.5 Implement Terminal view with virtualized rendering
    - Render visible lines only
    - Handle scrollback buffer
    - _Requirements: 6.8_
  - [ ] 12.6 Write property test for terminal virtualization
    - **Property 21: Terminal Virtualization**
    - **Validates: Requirements 6.8**
  - [ ] 12.7 Implement terminal input handling
    - Capture keystrokes and send to PTY
    - Handle special keys (arrows, backspace, etc.)
    - _Requirements: 6.3_
  - [ ] 12.8 Implement terminal toggle and working directory sync
    - Toggle terminal panel visibility
    - Sync working directory with explorer
    - _Requirements: 6.1, 6.5, 6.6_
  - [ ] 12.9 Implement terminal visual polish
    - Monospace font rendering
    - Blinking cursor
    - Selection and copy/paste
    - _Requirements: 12.1, 12.2, 12.3, 12.4, 12.5, 12.6_

- [ ] 13. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 14. File Preview Panel
  - [ ] 14.1 Implement Preview component with metadata display
    - Show file name, size, type, date, permissions
    - Update on file selection
    - _Requirements: 7.1_
  - [ ] 14.2 Write property test for preview metadata completeness
    - **Property 22: Preview Metadata Completeness**
    - **Validates: Requirements 7.1**
  - [ ] 14.3 Implement text file preview with syntax highlighting
    - Detect file language from extension
    - Display content with line numbers
    - _Requirements: 7.2_
  - [ ] 14.4 Write property test for preview text line numbers
    - **Property 23: Preview Text Line Numbers**
    - **Validates: Requirements 7.2**
  - [ ] 14.5 Implement image preview with thumbnails
    - Load and display image thumbnail
    - Show dimensions and format
    - _Requirements: 7.3_
  - [ ] 14.6 Write property test for preview image dimensions
    - **Property 24: Preview Image Dimensions**
    - **Validates: Requirements 7.3**
  - [ ] 14.7 Implement binary file hex dump preview
    - Read first 256 bytes
    - Display as hex dump with ASCII
    - _Requirements: 7.5_
  - [ ] 14.8 Write property test for preview hex dump size
    - **Property 25: Preview Hex Dump Size**
    - **Validates: Requirements 7.5**
  - [ ] 14.9 Implement directory preview with statistics
    - Count items and subdirectories
    - Calculate total size
    - _Requirements: 7.6_
  - [ ] 14.10 Write property test for preview directory statistics
    - **Property 26: Preview Directory Statistics**
    - **Validates: Requirements 7.6**

- [ ] 15. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 16. Tools Section
  - [ ] 16.1 Implement Tools section in Sidebar
    - Create collapsible panel with action buttons
    - _Requirements: 8.1_
  - [ ] 16.2 Implement New File and New Folder actions
    - Show name input dialog
    - Create file/folder in current directory
    - _Requirements: 8.2, 8.3_
  - [ ] 16.3 Implement batch operations
    - Enable copy/move/delete when files selected
    - _Requirements: 8.4_
  - [ ] 16.4 Implement utility actions
    - Open Terminal Here
    - Copy Path to clipboard
    - Refresh directory
    - _Requirements: 8.5, 8.6, 8.7_
  - [ ] 16.5 Implement hidden files toggle
    - Toggle visibility of dotfiles
    - Persist setting
    - _Requirements: 8.8_
  - [ ] 16.6 Write property test for hidden files toggle
    - **Property 27: Hidden Files Toggle**
    - **Validates: Requirements 8.8**

- [ ] 17. Tab Management
  - [ ] 17.1 Implement TabState model
    - Create `Tab` and `TabState` structs
    - Implement open/close/switch operations
    - _Requirements: 9.1, 9.2, 9.3, 9.4_
  - [ ] 17.2 Write property test for tab open increases count
    - **Property 28: Tab Open Increases Count**
    - **Validates: Requirements 9.2**
  - [ ] 17.3 Write property test for tab close decreases count
    - **Property 29: Tab Close Decreases Count**
    - **Validates: Requirements 9.4**
  - [ ] 17.4 Implement TabBar view
    - Render tabs with titles and close buttons
    - Handle tab clicks and close
    - _Requirements: 9.5_
  - [ ] 17.5 Write property test for tab title matches directory
    - **Property 30: Tab Title Matches Directory**
    - **Validates: Requirements 9.5**
  - [ ] 17.6 Implement tab overflow handling
    - Scroll or dropdown when tabs exceed width
    - _Requirements: 9.7_
  - [ ] 17.7 Handle last tab close
    - Open new tab with home directory
    - _Requirements: 9.8_

- [ ] 18. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 19. Status Bar
  - [ ] 19.1 Implement StatusBar component
    - Display total items and selected count
    - _Requirements: 10.1, 10.2_
  - [ ] 19.2 Write property test for status bar item count
    - **Property 31: Status Bar Item Count**
    - **Validates: Requirements 10.2**
  - [ ] 19.3 Implement selection size display
    - Calculate and show combined size
    - _Requirements: 10.3_
  - [ ] 19.4 Write property test for status bar selection size
    - **Property 32: Status Bar Selection Size**
    - **Validates: Requirements 10.3**
  - [ ] 19.5 Implement status bar actions
    - Terminal toggle button
    - View mode toggle
    - _Requirements: 10.4, 10.5_
  - [ ] 19.6 Implement git branch detection
    - Detect .git directory
    - Read current branch name
    - _Requirements: 10.7_

- [ ] 20. Keyboard Navigation
  - [ ] 20.1 Implement arrow key navigation in FileList
    - Move selection with Up/Down arrows
    - _Requirements: 13.1_
  - [ ] 20.2 Write property test for keyboard selection movement
    - **Property 33: Keyboard Selection Movement**
    - **Validates: Requirements 13.1**
  - [ ] 20.3 Implement Enter and Backspace navigation
    - Enter to open directory
    - Backspace to go to parent
    - _Requirements: 13.2, 13.3_
  - [ ] 20.4 Write property test for parent navigation
    - **Property 34: Parent Navigation**
    - **Validates: Requirements 13.3**
  - [ ] 20.5 Implement global keyboard shortcuts
    - Cmd+T for new tab
    - Cmd+W for close tab
    - Cmd+` for terminal toggle
    - Cmd+F for search focus
    - _Requirements: 13.4, 13.5, 13.6, 13.8_

- [ ] 21. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.


- [ ] 22. UI Spacing, Typography and RPG Styling
  - [ ] 22.1 Set up Google Fonts loading
    - Load Crimson Pro (200, 400, 900 weights) for display text
    - Load IBM Plex Sans (400, 500, 600 weights) for body text
    - Load JetBrains Mono (400, 500 weights) for code/terminal
    - _Requirements: 11.1, 11.2, 11.3_
  - [ ] 22.2 Define typography scale with extreme contrasts
    - Implement 3x+ size jumps (12px → 36px → 72px)
    - Implement weight extremes (200 thin vs 900 black)
    - Define letter spacing constants (tight, normal, wide, ultra)
    - _Requirements: 11.1, 11.4_
  - [ ] 22.3 Define spacing constants
    - Create spacing scale (4px, 8px, 12px, 16px, 24px, 32px, 48px)
    - Define component-specific spacing (sidebar, file list, toolbar, terminal)
    - _Requirements: 11.5, 11.6_
  - [ ] 22.4 Apply RPG styling to Sidebar
    - 280px width with 16px item padding, 24px section gaps
    - Ornate section dividers with flourishes
    - Themed hover glow effects
    - _Requirements: 11.5, 11.8, 11.9_
  - [ ] 22.5 Apply RPG styling to FileList
    - 40px row height with 20px icons, 12px icon-to-text gap
    - Subtle hover glow effects matching theme
    - Selection with themed accent colors
    - _Requirements: 11.6_
  - [ ] 22.6 Apply RPG styling to toolbar and breadcrumbs
    - 52px toolbar height with 36px buttons
    - Decorative corner flourishes on toolbar
    - Themed dividers between toolbar sections
    - _Requirements: 11.7_
  - [ ] 22.7 Implement background effects
    - Layered gradients for depth
    - Subtle noise texture overlay (2-5% opacity)
    - Theme-specific patterns (volcanic, crystalline, parchment)
    - _Requirements: 11.9_
  - [ ] 22.8 Implement ornate borders and frames
    - Corner flourish SVG decorations
    - Double-line medieval borders for panels
    - Gold/themed trim on important elements
    - _Requirements: 11.8_

- [ ] 23. Quick Look
  - [ ] 23.1 Implement QuickLook overlay component
    - Create full-screen overlay
    - Handle Space key to toggle
    - _Requirements: 15.1, 15.3_
  - [ ] 23.2 Implement image Quick Look
    - Display full-resolution image
    - Add zoom controls
    - _Requirements: 15.4_
  - [ ] 23.3 Implement text/document Quick Look
    - Render document content
    - _Requirements: 15.6_
  - [ ] 23.4 Implement Quick Look navigation
    - Arrow keys to preview next/previous
    - _Requirements: 15.7_

- [ ] 24. Multi-Window Support
  - [ ] 24.1 Implement WindowManager
    - Track open windows
    - Handle new window creation
    - _Requirements: 16.1, 16.2_
  - [ ] 24.2 Implement window state persistence
    - Save/restore window positions
    - _Requirements: 16.8_
  - [ ] 24.3 Implement cross-window drag-and-drop
    - Allow file drag between windows
    - _Requirements: 16.3_

- [ ] 25. File Operations with Progress
  - [ ] 25.1 Implement FileOperationsManager
    - Create operation queue
    - Track progress for each operation
    - _Requirements: 17.1, 17.2, 17.3, 17.4_
  - [ ] 25.2 Implement progress UI
    - Show current file and progress bar
    - Display estimated time remaining
    - _Requirements: 17.2_
  - [ ] 25.3 Implement error handling and cancel
    - Skip/Retry/Cancel options on error
    - Graceful cancellation
    - _Requirements: 17.5, 17.6_

- [ ] 26. Undo/Redo System
  - [ ] 26.1 Implement undo stack
    - Track undoable operations
    - Store original and new paths
    - _Requirements: 18.1, 18.2, 18.3, 18.4, 18.5_
  - [ ] 26.2 Write property test for undo operation reversal
    - **Property 38: Undo Operation Reversal**
    - **Validates: Requirements 18.1, 18.2**
  - [ ] 26.3 Implement redo stack
    - Track redoable operations
    - _Requirements: 18.6_

- [ ] 27. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 28. Batch Rename
  - [ ] 28.1 Implement BatchRename dialog
    - Show file list with preview
    - Pattern input with tokens
    - _Requirements: 19.1, 19.2_
  - [ ] 28.2 Write property test for batch rename preview accuracy
    - **Property 39: Batch Rename Preview Accuracy**
    - **Validates: Requirements 19.2**
  - [ ] 28.3 Implement rename patterns
    - Sequential numbers {n}
    - Date {date}
    - Extension {ext}
    - Find/Replace
    - _Requirements: 19.3, 19.4, 19.5, 19.6_
  - [ ] 28.4 Write property test for sequential numbers
    - **Property 40: Batch Rename Sequential Numbers**
    - **Validates: Requirements 19.3**
  - [ ] 28.5 Implement conflict detection
    - Highlight conflicting names
    - Prevent apply with conflicts
    - _Requirements: 19.8_

- [ ] 29. Bookmarks and Quick Access
  - [ ] 29.1 Implement BookmarkManager
    - Add/remove/rename bookmarks
    - Keyboard shortcut assignment
    - _Requirements: 20.1, 20.4, 20.5_
  - [ ] 29.2 Implement bookmarks UI in Sidebar
    - Display bookmarks section
    - Context menu for management
    - _Requirements: 20.2, 20.3_
  - [ ] 29.3 Implement Go to Folder dialog
    - Direct path entry
    - Recent locations list
    - _Requirements: 20.7, 20.8_

- [ ] 30. File Tags and Labels
  - [ ] 30.1 Implement TagManager
    - Create/delete tags
    - Apply/remove tags from files
    - _Requirements: 21.1, 21.2, 21.6_
  - [ ] 30.2 Write property test for tag persistence
    - **Property 41: Tag Persistence**
    - **Validates: Requirements 21.7**
  - [ ] 30.3 Implement tag storage
    - Use xattr where supported
    - Fallback to local database
    - _Requirements: 21.7, 21.8_
  - [ ] 30.4 Implement tag UI
    - Color dots in FileList
    - Tag filter in Sidebar
    - Search by tag syntax
    - _Requirements: 21.2, 21.4, 21.5_

- [ ] 31. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 32. Dual Pane Mode
  - [ ] 32.1 Implement DualPane state
    - Left and right pane states
    - Active pane tracking
    - _Requirements: 22.1, 22.2_
  - [ ] 32.2 Write property test for dual pane independence
    - **Property 42: Dual Pane Independence**
    - **Validates: Requirements 22.2**
  - [ ] 32.3 Implement dual pane UI
    - Side-by-side file lists
    - Tab to switch focus
    - _Requirements: 22.2, 22.3_
  - [ ] 32.4 Implement cross-pane operations
    - F5 to copy, F6 to move
    - Drag between panes
    - _Requirements: 22.4, 22.5, 22.6_

- [ ] 33. Column View (Miller Columns)
  - [ ] 33.1 Implement ColumnView state
    - Track columns and selections
    - Handle navigation
    - _Requirements: 23.1, 23.2_
  - [ ] 33.2 Write property test for column view hierarchy
    - **Property 43: Column View Hierarchy**
    - **Validates: Requirements 23.1, 23.2**
  - [ ] 33.3 Implement column view rendering
    - Cascading columns layout
    - Horizontal scrolling
    - _Requirements: 23.3, 23.5_
  - [ ] 33.4 Implement column view navigation
    - Arrow keys for navigation
    - _Requirements: 23.7, 23.8_

- [ ] 34. Smart Folders
  - [ ] 34.1 Implement SmartFolderManager
    - Create/edit/delete smart folders
    - Execute queries
    - _Requirements: 24.1, 24.2, 24.5, 24.6_
  - [ ] 34.2 Write property test for smart folder query consistency
    - **Property 44: Smart Folder Query Consistency**
    - **Validates: Requirements 24.3**
  - [ ] 34.3 Implement smart folders UI
    - Sidebar section
    - Query builder dialog
    - _Requirements: 24.7_

- [ ] 35. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 36. Device Monitor
  - [ ] 36.1 Implement DeviceMonitor core
    - Device enumeration
    - Event subscription
    - _Requirements: 26.1, 26.2, 26.3, 28.1_
  - [ ] 36.2 Write property test for device detection completeness
    - **Property 45: Device Detection Completeness**
    - **Validates: Requirements 26.1, 26.2, 26.3**
  - [ ] 36.3 Write property test for device event ordering
    - **Property 46: Device Event Ordering**
    - **Validates: Requirements 26.1, 26.7, 28.2, 28.3**
  - [ ] 36.4 Implement Windows device monitoring
    - Drive letter enumeration
    - WMI for device events
    - _Requirements: 26.4_
  - [ ] 36.5 Implement macOS device monitoring
    - DiskArbitration framework
    - /Volumes enumeration
    - _Requirements: 26.5_
  - [ ] 36.6 Implement Linux device monitoring
    - udev for device events
    - /media and /mnt enumeration
    - _Requirements: 26.6_
  - [ ] 36.7 Implement eject/unmount
    - Platform-specific unmount APIs
    - _Requirements: 26.8_
  - [ ] 36.8 Write property test for device space accuracy
    - **Property 48: Device Space Accuracy**
    - **Validates: Requirements 26.2**

- [ ] 37. WSL Integration (Windows)
  - [ ] 37.1 Implement WSL distribution detection
    - Query installed distributions
    - Check running status
    - _Requirements: 27.1, 27.5_
  - [ ] 37.2 Implement WSL filesystem browsing
    - Path translation (\\wsl$\)
    - Linux permissions display
    - _Requirements: 27.2, 27.3_
  - [ ] 37.3 Write property test for WSL path translation
    - **Property 47: WSL Path Translation**
    - **Validates: Requirements 27.4**
  - [ ] 37.4 Implement WSL context menu
    - Open Terminal Here for WSL
    - _Requirements: 27.6_

- [ ] 38. Network and Cloud Storage
  - [ ] 38.1 Implement network location browser
    - SMB/FTP/SFTP connection dialog
    - _Requirements: 25.1, 25.2_
  - [ ] 38.2 Implement network file operations
    - Remote file listing
    - Loading indicators
    - _Requirements: 25.3, 25.5_
  - [ ] 38.3 Implement cloud storage integration
    - Detect cloud providers
    - Show sync status
    - _Requirements: 25.6, 25.7_

- [ ] 39. Devices UI in Sidebar
  - [ ] 39.1 Implement Devices section in Sidebar
    - Display connected devices
    - Show device icons and labels
    - _Requirements: 26.1, 26.2, 28.6_
  - [ ] 39.2 Implement device click navigation
    - Navigate to device root on click
    - _Requirements: 26.4, 26.5, 26.6_
  - [ ] 39.3 Implement device indicators
    - Read-only lock icon
    - Running status for WSL
    - _Requirements: 27.5, 28.7_

- [ ] 40. Final Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

